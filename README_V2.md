# Integration V2 (post-cleanup)

The integration test has been split into components & refactored to make this repo
both easier to use and more modular.  It retains all the old functionality, 
with some helpful additions.

## Repo structure
```
 - integration/
 -- run.sh  # Basic integration runner
 -- start.sh    # More advanced runner for continuous/simultanious testing
 -- stop.sh     # Cleanup for start.sh
 -- tests/  # Tests directory contains individual tests which can be run by the top level scripts
 --- basice2e_local # Test names correspond to the directory name
 ---- run.sh    # Each test must contain a run.sh script and clients.goldoutput directory
 ---- clients.goldoutput/
 --- channels
 --- ...
 -- network/    # This network package is used across all tests
 --- network.sh # network and/or cleanup files should be sourced into files as always
 --- cleanup.sh
 --- [network configs]
 -- results/    # This is generated by running tests, and is not in source control
 --- network    # Local network outputs to results/network
 --- basice2e_local
 --- ...    # Results contains directories of client logs for each test run
```

## Running integration tests

Integration tests can be run as they always have been, with some small changes.  
All testing must now run through `run.sh` in the root directory.  By default,
the script will run all tests in sequence.  it accepts an optional argument for
envronment [mainnet|devnet|protonet].  It supports an additional named argument 
for running single tests or subsets as well, `--run [testname]`.  Use `run.sh help` 
for more information on the usage.  

## Advanced integration testing

Also included in the repo are the scripts `start.sh` and `stop.sh`.  These can 
be used to the same effect as the single runner, with some notable differences.  
Running `start.sh` will check for a live network in the expected location, and
will connect to it if found.  This is somewhat intelligent, but not well tested yet.
It will not shut down the network when the test is finished, leaving it active 
for other local testing if needed.  To shut down the network, use the `stop.sh`
script.  The help commands on each script contain more detailed information on 
usage.

